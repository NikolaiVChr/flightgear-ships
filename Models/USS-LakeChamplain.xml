<?xml version="1.0" encoding="UTF-8"?>
<PropertyList>
    <path>Aircraft/u.s.navy/Models/CG-57-high-detail/CG-57.ac</path>
    <sound>
        <path>Aircraft/u.s.navy/vessel-sound/mp-sound.xml</path>
    </sound>
    <animation>
        <!-- to be able to land on deck -->
        <object-name>flight-deck-large-texture</object-name>
        <enable-hot type="bool">true</enable-hot>
    </animation>
    <!-- *** Effects *** -->
    <nasal>
        <load>print("LOAD CG-57", cmdarg().getPath());

			var fg_root = getprop("/sim/fg-root");
			var self = cmdarg();


			########
			# properties used to calculate rel wind for the bow-wave shader

			var speed_Node = self.getNode("velocities/speed-kts", 1);
			var hdg_Node = self.getNode("orientation/true-heading-deg", 1);
			var wind_speed_Node = self.getNode("environment/rel-wind-speed-kts", 1);
			var valid_Node = self.getNode("valid", 1);
			wind_speed_Node.setDoubleValue(0);
			hdg_Node.setDoubleValue(0);
			speed_Node.setDoubleValue(0);


			########
			# the main loop

			var update = func {
				var value = wind_speed_Node.getValue();
				setprop("/environment/CG-57/rel-wind-speed-kts", value);
				value = speed_Node.getValue();
				setprop("/environment/CG-57/spd-kt", value);
				value = hdg_Node.getValue();
				setprop("/environment/CG-57/hdg-deg", value);
				if (valid_Node.getValue() == 0) {
					return;
				}
				settimer(update,0);
			}


			########
			#start the main loop
			update();
		</load>
    </nasal>
    <unload>#print("UNLOAD CG-57 ", cmdarg().getPath());</unload>
    <model>
        <name>Ensign</name>
        <path>Models/Maritime/Military/CG-57/ensign.xml</path>
        <offsets>
            <!--32.7427	26.6797	0.0628354-->
            <x-m>32.7427</x-m>
            <y-m>0.0</y-m>
            <z-m>26.6797</z-m>
        </offsets>
    </model>
    <!--	<model>
    <name>Bow-Wave</name>
    <path>Models/Geometry/Nimitz/Models/Effects/bow_wave_carrier.xml</path>
    <offsets>
      <x-m>25</x-m>
      <z-m>-0.001</z-m>
    </offsets>
  </model>

  <model>
    <name>bowwake-stbd</name>
    <path>Models/Geometry/Nimitz/Models/Effects/wake_carrier.xml</path>
    <offsets>
      <x-m>-45.0</x-m>
      <y-m>0</y-m>
      <z-m>1.0</z-m>
      <heading-deg>0</heading-deg>
    </offsets>
    <overlay>
      <particlesystem>
        <placer>
          <type>segments</type>
          <vertex>
            <x-m>0</x-m>
            <y-m>0</y-m>
            <z-m>0</z-m>
          </vertex>
          <vertex>
            <x-m>0</x-m>
            <y-m>0.5</y-m>
            <z-m>0</z-m>
          </vertex>
          <vertex>
            <x-m>-10.0</x-m>
            <y-m>1.65</y-m>
            <z-m>0</z-m>
          </vertex>
          <vertex>
            <x-m>-20.0</x-m>
            <y-m>3.9</y-m>
            <z-m>0</z-m>
          </vertex>
        </placer>
        <shooter>
          <speed-mps>
            <property>velocities/speed-kts</property>
            <factor>0.5144</factor>
            <spread>2</spread>
          </speed-mps>
        </shooter>
        <counter>
          <particles-per-sec>
            <property>velocities/speed-kts</property>
          </particles-per-sec>
        </counter>
        <particle>
          <life-sec>
            <value>90</value>
          </life-sec>
        </particle>
      </particlesystem>
    </overlay>
  </model>

  <model>
    <name>bowwake-port</name>
    <path>Models/Geometry/Nimitz/Models/Effects/wake_carrier.xml</path>
    <offsets>
      <x-m>-45.0</x-m>
      <y-m>0</y-m>
      <z-m>1.0</z-m>
      <heading-deg>0</heading-deg>
    </offsets>
    <overlay>
      <particlesystem>
        <placer>
          <type>segments</type>
          <vertex>
            <x-m>0</x-m>
            <y-m>0</y-m>
            <z-m>0</z-m>
          </vertex>
          <vertex>
            <x-m>0</x-m>
            <y-m>-0.5</y-m>
            <z-m>0</z-m>
          </vertex>
          <vertex>
            <x-m>-10.0</x-m>
            <y-m>-1.65</y-m>
            <z-m>0</z-m>
          </vertex>
          <vertex>
            <x-m>-20.0</x-m>
            <y-m>-3.9</y-m>
            <z-m>0</z-m>
          </vertex>
        </placer>
        <shooter>
          <theta-min-deg>-80</theta-min-deg>
          <theta-max-deg>-100</theta-max-deg>
          <phi-min-deg>88</phi-min-deg>
          <phi-max-deg>90</phi-max-deg>
          <speed-mps>
            <property>velocities/speed-kts</property>
            <factor>0.5144</factor>
            <spread>2</spread>
          </speed-mps>
        </shooter>
        <counter>
          <particles-per-sec>
            <property>velocities/speed-kts</property>
          </particles-per-sec>
        </counter>
        <particle>
          <life-sec>
            <value>90</value>
          </life-sec>
        </particle>
      </particlesystem>
    </overlay>
  </model>

  <model>
    <name>Stern-Wake</name>
    <path>Models/Geometry/Nimitz/Models/Effects/wake2_carrier.xml</path>
    <offsets>
      <x-m>100</x-m>
      <y-m>0</y-m>
      <z-m>2.0</z-m>
      <heading-deg>0</heading-deg>
    </offsets>
    <overlay>
      <particlesystem>
        <placer>
          <type>segments</type>
          <vertex>
            <x-m>0</x-m>
            <y-m>-4</y-m>
            <z-m>-2</z-m>
          </vertex>
          <vertex>
            <x-m>0</x-m>
            <y-m>-3.5</y-m>
            <z-m>-1</z-m>
          </vertex>
          <vertex>
            <x-m>0</x-m>
            <y-m>0</y-m>
            <z-m>0</z-m>
          </vertex>
          <vertex>
            <x-m>0</x-m>
            <y-m>3.5</y-m>
            <z-m>-1</z-m>
          </vertex>
          <vertex>
            <x-m>0</x-m>
            <y-m>4</y-m>
            <z-m>-2</z-m>
          </vertex>
        </placer>
        <shooter>
          <theta-min-deg>-80</theta-min-deg>
          <theta-max-deg>-100</theta-max-deg>
          <phi-min-deg>88</phi-min-deg>
          <phi-max-deg>90</phi-max-deg>
          <speed-mps>
            <property>velocities/speed-kts</property>
            <factor>1.0</factor>
            <spread>5</spread>
          </speed-mps>
        </shooter>
        <particle>
          <life-sec>
            <value>90</value>
          </life-sec>
        </particle>
      </particlesystem>
    </overlay>
  </model>

  <animation>
    <type>rotate</type>
    <object-name>Wake</object-name>
    <object-name>Bow-Wave</object-name>
    <object-name>Stern-Wake</object-name>
    <property>orientation/roll-deg</property>
    <factor>1</factor>
    <center>
      <x-m>105.814</x-m>
      <y-m>0.00</y-m>
      <z-m>1.5</z-m>
    </center>
    <axis>
      <x>1</x>
      <y>0</y>
      <z>0</z>
    </axis>
  </animation>
  
  <animation>
    <object-name>Bow-Wave</object-name>
    <type>scale</type>
    <property>velocities/speed-kts</property>
    <x-factor>0.04</x-factor>
    <y-factor>0.0</y-factor>
    <z-factor>0.0</z-factor>
    <x-offset>0.2</x-offset>
    <y-offset>0.6</y-offset>
    <z-offset>1.0</z-offset>
    <x-min>0.4</x-min>
    <x-max>1.2</x-max>
    <center>
      <x-m>-55.0</x-m>
      <y-m>0.0</y-m>
      <z-m>0.0</z-m>
    </center>
  </animation>
  
  
   -->
    <animation>
        <type>rotate</type>
        <object-name>nav-radar-mast</object-name>
        <property>/sim/time/elapsed-sec</property>
        <factor>40</factor>
        <center>
            <x-m>0.356049</x-m>
            <y-m>2.06902</y-m>
            <z-m>0</z-m>
        </center>
        <axis>
            <x>0</x>
            <y>0</y>
            <z>1</z>
        </axis>
    </animation>
    <animation>
        <type>rotate</type>
        <object-name>nav-radar-bridge</object-name>
        <property>/sim/time/elapsed-sec</property>
        <factor>85</factor>
        <center>
            <x-m>-10.0043</x-m>
            <y-m>0.00521</y-m>
            <z-m>0</z-m>
        </center>
        <axis>
            <x>0</x>
            <y>0</y>
            <z>1</z>
        </axis>
    </animation>
    <animation>
        <type>rotate</type>
        <object-name>SPS-49-Antenna</object-name>
        <property>/sim/time/elapsed-sec</property>
        <factor>50</factor>
        <center>
            <x-m>29.6884</x-m>
            <y-m>0</y-m>
            <z-m>27.6858</z-m>
        </center>
        <axis>
            <x>0</x>
            <y>0</y>
            <z>1</z>
        </axis>
    </animation>
    <!-- roll adjustment (rolls by rudder angel) -->
    <animation>
        <type>rotate</type>
        <property>sim/multiplay/generic/float[0]</property>
        <factor>0.88</factor>
        <center>
            <x-m>0</x-m>
            <y-m>0</y-m>
            <z-m>-0.2</z-m>
        </center>
        <axis>
            <x>0.2</x>
            <y>0</y>
            <z>0</z>
        </axis>
    </animation>
    <!-- Spray # -->
    <model>
        <path>Aircraft/u.s.navy/Models/Effects/sprays.xml</path>
        <offsets>
            <x-m>-44.0</x-m>
            <y-m>0.0</y-m>
            <z-m>1.2</z-m>
        </offsets>
    </model>
    <model>
        <path>Aircraft/u.s.navy/Models/Effects/sprayF.xml</path>
        <offsets>
            <x-m>-46.0</x-m>
            <y-m>0.0</y-m>
            <z-m>0.8</z-m>
        </offsets>
    </model>
    <model>
        <path>Aircraft/u.s.navy/Models/Effects/lights/white.xml</path>
        <offsets>
            <x-m>51</x-m>
            <y-m>0.016201</y-m>
            <z-m>18.0546</z-m>
        </offsets>
    </model>
    <model>
        <path>Aircraft/u.s.navy/Models/Effects/lights/pos-left.xml</path>
        <offsets>
            <x-m>2.4424</x-m>
            <y-m>-6.06729</y-m>
            <z-m>32.5602</z-m>
        </offsets>
    </model>
    <model>
        <path>Aircraft/u.s.navy/Models/Effects/lights/pos-right.xml</path>
        <offsets>
            <x-m>2.4424</x-m>
            <y-m>6.06729</y-m>
            <z-m>32.5602</z-m>
        </offsets>
    </model>
    <animation>
        <object-name>flight-deck-projector-light-ON</object-name>
        <type>material</type>
        <emission>
            <red-prop>sim/multiplay/generic/int[1]</red-prop>
            <green-prop>sim/multiplay/generic/int[1]</green-prop>
            <blue-prop>sim/multiplay/generic/int[1]</blue-prop>
            <factor-prop>sim/multiplay/generic/float[4]</factor-prop>
        </emission>
    </animation>
    <animation>
        <object-name>flight-deck-large-texture</object-name>
        <object-name>decks-white-texture</object-name>
        <object-name>flight-deck-RSD-rails</object-name>
        <type>material</type>
        <condition>
            <property>sim/multiplay/generic/int[1]</property>
        </condition>
        <emission>
            <red>  0.5</red>
            <green>0.5</green>
            <blue> 0.5</blue>
            <factor-prop>sim/multiplay/generic/float[4]</factor-prop>
        </emission>
    </animation>
    <effect>
        <inherits-from>Effects/model-transparent</inherits-from>
        <object-name>nets-transparency</object-name>
        <object-name>SPS-49-net-transparent</object-name>
        <object-name>glass-command-bridge</object-name>
		<object-name>glass-flight-deck</object-name>
    </effect>
    <animation>
	      <type>noshadow</type>
	      <object-name>nets-transparency</object-name>
        <object-name>SPS-49-net-transparent</object-name>
        <object-name>glass-command-bridge</object-name>
		    <object-name>glass-flight-deck</object-name>
	  </animation>
    <effect>
    		<inherits-from>Effects/model-combined-deferred</inherits-from>
    		<object-name>main-model</object-name>
    		<object-name>hangar</object-name>
    		<object-name>railing</object-name>
    		<object-name>stern-projector-light-ON</object-name>
    		<object-name>island-projector-light-ON</object-name>
    		<object-name>flight-deck-projector-light-ON</object-name>
    		<object-name>hull</object-name>
    		<!--<object-name>SHIP-ANIMATIONS</object-name>-->
    		<object-name>nav-radar-mast</object-name>
    		<object-name>nav-radar-bridge</object-name>
    		<object-name>aerovane-R</object-name>
    		<object-name>aerovane-body-R</object-name>
    		<object-name>aerovane-prp-R</object-name>
    		<object-name>aerovane-L</object-name>
    		<object-name>aerovane-body-L</object-name>
    		<object-name>aerovane-prop-L</object-name>
    		<object-name>mk38mod2-R</object-name>
    		<object-name>mk38mod2-mount-R</object-name>
    		<object-name>mk38mod2-gun-R</object-name>
    		<object-name>mk38mod2-optical-R</object-name>
    		<object-name>mk38mod2-optical-mount-R</object-name>
    		<object-name>mk38mod2-optical-sphere-R</object-name>
    		<object-name>mk38mod2-L</object-name>
    		<object-name>mk38mod2-gun-L</object-name>
    		<object-name>mk38mod2-mount-L</object-name>
    		<object-name>mk38mod2-optical-L</object-name>
    		<object-name>mk38mod2-optical-sphere-L</object-name>
    		<object-name>mk38mod2-optical-mount-L</object-name>
    		<!--<object-name>mk-145-stern</object-name>-->
    		<object-name>mk-145-turret-stern</object-name>
    		<object-name>mk-145-gun-stern</object-name>
    		<!--<object-name>mk-145-aft</object-name>-->
    		<object-name>mk-145-turret-aft</object-name>
    		<object-name>mk-145-gun-aft</object-name>
    		<object-name>phalanx-starboard</object-name>
    		<object-name>phalanx-turret-starboard</object-name>
    		<object-name>phalanx-gun-starboard</object-name>
    		<object-name>phalanx-port</object-name>
    		<object-name>phalanx-turret-port</object-name>
    		<object-name>phalanx-gun-port</object-name>
    		<object-name>propellers</object-name>
    		<object-name>rudders</object-name>
    		<object-name>hangar-door-L</object-name>
    		<object-name>hangar-door-R</object-name>
    		<!--<object-name>SPS-49-Antenna</object-name>-->
    		<object-name>radar-structure</object-name>
    		<!--<object-name>SPS-49-net-tranparent</object-name>-->
    		<!--<object-name>flight-deck-signal-lights</object-name>-->
    		<object-name>SGSI</object-name>
    		<object-name>SGSI-fault-lights</object-name>
    		<!--<object-name>SHRB</object-name>-->
    		<object-name>SHRB-fault-light</object-name>
    		<object-name>SHRB</object-name>
    		<object-name>SHRB-lights</object-name>
    		<object-name>landing-light-on-stanchion</object-name>
    		<object-name>landing-lights-starboard</object-name>
    		<object-name>landing-lights-vert-ramp</object-name>
    		<object-name>lights-air-refuel-port</object-name>
    		<object-name>flight-deck-built-in-lights</object-name>
    		<!--<object-name>nav-beacons</object-name>-->
    		<object-name>beacons-mast</object-name>
    		<object-name>beacon-starboard</object-name>
    		<object-name>beacon-port</object-name>
    		<object-name>beacon-stern</object-name>
    		<object-name>beacons-mast</object-name>
    		<object-name>beacons-mast</object-name>
    		<object-name>beacons-mast</object-name>
    		<!--<object-name>other-textures-objects</object-name>-->
    		<object-name>main-deck</object-name>
    		<object-name>flight-deck-RSD-rails</object-name>
    		<object-name>flight-deck-large-texture</object-name>
    		<object-name>decks-white-texture</object-name>
    		<!--<object-name>glass-command-bridge</object-name>
    		<object-name>glass-flight-deck</object-name>-->
    		<!--<object-name>nets-transparency</object-name>-->
	  </effect>
    <animation>
        <type>select</type>
        <object-name>hangar-door-L</object-name>
    		<object-name>hangar-door-R</object-name>
    		<condition>
            <property>sim/multiplay/generic/int[2]</property>
        </condition>
    </animation>
    <model>
        <path>Models/Aircraft/H-60.xml</path>
        <condition>
            <property>sim/multiplay/generic/int[3]</property>
        </condition>
        <offsets>
            <x-m>62</x-m>
            <y-m>0</y-m>
            <z-m>14.5</z-m>
            <pitch-deg>2</pitch-deg>
            <heading-deg>9</heading-deg>
        </offsets>
    </model>
    <model>
    	<name>heli</name>
        <path>Models/Aircraft/H-60.xml</path>
        <condition>
            <property>sim/multiplay/generic/int[5]</property>
        </condition>
        <offsets>
            <x-m>200</x-m>
            <y-m>0</y-m>
            <z-m>40</z-m>
            <heading-deg>0</heading-deg>
        </offsets>
    </model>
    <animation>
        <type>rotate</type>
        <object-name>heli</object-name>
        <property>sim/multiplay/generic/float[3]</property>
        <factor>0.75</factor>
        <center>
            <x-m>200</x-m>
            <y-m>0</y-m>
            <z-m>40</z-m>
        </center>
        <axis>
            <x>0</x>
            <y>-1</y>
            <z>0</z>
        </axis>
    </animation>
    <model>
    	<name>Pushback</name>
    	<path>Aircraft/u.s.navy/Models/Pushback/Shorttug.xml</path>
		<offsets>
			<x-m> -60.000 </x-m>
			<y-m>   0.000 </y-m>
			<z-m>   0.000 </z-m>
		</offsets>
	</model>
    <!--******************* LOD *****************-->
    <animation>
        <type>range</type>
        <min-m>0</min-m>
        <max-m>15000</max-m>
    </animation>
    <animation>
        <type>range</type>
        <object-name>railing</object-name>
        <!--<object-name>Net</object-name>
		<object-name>400ft</object-name>-->
        <max-m>3000</max-m>
    </animation>
    <!--<animation>
		<type>range</type>
		<object-name>1000m</object-name>
		<min-m>0</min-m>
		<max-m>3000</max-m>
	</animation>-->
</PropertyList>